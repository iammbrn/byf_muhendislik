{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% block bodyclass %}{{ block.super }} change-history{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">Ana Sayfa</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ module_name }}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'change' object.pk|admin_urlquote %}">{{ object|truncatewords:"18" }}</a>
&rsaquo; Geçmiş
</div>
{% endblock %}

{% block content %}
<h1>{{ object|truncatewords:"18" }} - Değişiklik Geçmişi</h1>

<div id="content-main">
<div id="change-history" class="module">

{% if action_list %}
    <table id="result_list">
        <thead>
        <tr>
            <th scope="col">Tarih/Saat</th>
            <th scope="col">Kullanıcı</th>
            <th scope="col">İşlem</th>
        </tr>
        </thead>
        <tbody>
        {% for action in action_list %}
        <tr>
            <th scope="row">{{ action.action_time|date:"d.m.Y H:i" }}</th>
            <td>{{ action.user.get_username }}{% if action.user.get_full_name %} ({{ action.user.get_full_name }}){% endif %}</td>
            <td>{{ action.get_change_message }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    
    {% if pagination_required %}
    <div class="paginator">
        {% for i in page_range %}
          {% if i == action_list.paginator.ELLIPSIS %}
            <span class="ellipsis">{{ action_list.paginator.ELLIPSIS }}</span>
          {% elif i == action_list.number %}
            <span class="this-page">{{ i }}</span>
          {% else %}
            <a href="?{{ page_var }}={{ i }}" {% if i == action_list.paginator.num_pages %} class="end" {% endif %}>{{ i }}</a>
          {% endif %}
        {% endfor %}
        <span class="total-count">{{ action_list.paginator.count }} {% if action_list.paginator.count == 1 %}kayıt{% else %}kayıt{% endif %}</span>
    </div>
    {% endif %}
{% else %}
    <p class="no-history-message">Bu nesnenin değişiklik geçmişi bulunmamaktadır. Muhtemelen bu yönetim sitesi üzerinden eklenmemiştir.</p>
{% endif %}
</div>
</div>
{% endblock %}

